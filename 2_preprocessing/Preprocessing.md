# 법령 크롤링 데이터 전처리

- [1.데이터 자체 삭제 케이스](#1데이터-자체-삭제-케이스)
  - [1-1.NaN 케이스](#1-1nan-케이스)
  - [1-2.길이(글자수)로 자르기](#1-2-길이글자수로-자르기)
- [2.특수문자 케이스](#2특수문자-케이스)
  - [2-1.대괄호 처리하기](#2-1대괄호-처리하기)
  - [2-2.꺾쇠괄호 처리하기](#2-2꺾쇠괄호-처리하기)
- [3.기타 내용 처리](#3기타-내용-처리)
- [4.세부 전처리](#4세부-전처리)
  - [4-1.머리 숫자 제거](#4-1머리-숫자-제거)
    - [4-1-1.Tag `ho`에 해당하는 내용](#4-11tag-ho에-해당하는-내용)
    - [4-1-2.Tag `hang`에 해당하는 내용](#4-12tag-hang에-해당하는-내용)
  - [4-2.ASCII 코드](#4-2ascii코드-점검)
    - [4-2-1.한글 Case](#4-2-1한글-case)
    - [4-2-2.영어 Case](#4-2-2영어-case)

## 1.데이터 자체 삭제 케이스

### 1-1.`NaN` 케이스

- 한글이 `NaN`인 경우는 영어에 쌍으로 수집되는 데이터가 누락된 경우이기에 삭제 처리 함

### 1-2. 길이(글자수)로 자르기

- `html`의 `tag` 중 `ho`에 해당하는 내용은 한 어절의 단어이거나 길이가 짧은 경우가 많음
- 따라서 [1-1](#1-1nan-케이스)을 처리한 후의 data(585,946개) 중 단순 글자수를 기준으로 데이터양을 줄임
- 데이터를 삭제한 기준은 다음과 같음

  1. $log_{10}(한글\;글자\;수) < 1.5$의 경우 삭제
  2. 위의 방식에 따라 삭제된 데이터에서 $log_{10}(영어\;글자\;수) < 1.5$의 경우 삭제
- 이는 각 단계 별 데이터 셋의 $Q_1$ 값 근처의 값으로 처리 (하기 표 참조)

  - NaN 처리 후 데이터 셋의 한글 글자 수 통계량/값
    | 통계량 | 값            |
    | ------ | ------------- |
    | count  | 585946.000000 |
    | mean   | 1.725883      |
    | std    | 0.349676      |
    | min    | 0.301030      |
    | 25%    | 1.462398      |
    | 50%    | 1.755875      |
    | 75%    | 1.986772      |
    | max    | 3.253096      |
  - 한글 삭제 후(log값 1.5 이하) 데이터 셋의 영어 글자수 통계량/값
    | 통계량   | 값                                       |
    | -------- | ---------------------------------------- |
    | count    | 585946.000000                            |
    | mean     | 2.182582                                 |
    | std      | 0.362451                                 |
    | min      | 0.301030                                 |
    | 25%      | 1.929419                                 |
    | 50%      | 2.214844                                 |
    | 75%      | 2.451786                                 |
    | max      | 3.899766                                 |

<br>

## 2.특수문자 케이스

### 2-1.대괄호 처리하기

- 대괄호로만 이루어진 케이스 제거 : `drop` - 중복되는 패턴이 많음
- 대괄호로 시작하는 문자열 케이스 제거 : 연속되는 문장 의미파악에 필요없음
- `［`, `］`처럼 표기가 다른 대괄호를 일반 대괄호로 대치
- `]` 하나만 남았을 때, 이를 삭제

### 2-2.꺾쇠괄호 처리하기

- 꺽쇠 괄호 쌍이지만, 뒷 부분에 붙는 부분 제거
- 눈으로 확인한 예외 케이스 drop
  - 뒷부분에 단어가 더 붙은 경우 (<..>부칙)
  - 원문자 표기가 이상한 표현 변경 (<16> ➡️ ⑯)
  - `<생략:별표>`로 인해 생기는 꺽쇠는 drop
  - `＜`, `＞` 처럼 일반적인 꺾쇠가 아닌 경우 찾아서 제거
  - 꺽쇠괄호 뒤에 기타 특수기호 붙은 내용 제거(`.`,`"`,`:`)
  - 쌍이 안 이루어지는 케이스 찾아서 제거 (앞/뒤만 남은 경우)

## 3.기타 내용 처리

- 대/중괄호 쌍을 이루지 못하는 경우 drop
- `his or herhis or her`, `him or herhim or her`, `he or shehe or she` ➡️ `his or her`, `him or her`, `he or she`
- `Proviso Omitted`와 `단서 생략`은 쌍을 이루지 못 하는 경우가 수이므로 각 내용 삭제 (내용이 불일치한 경우 drop)
- 중복 drop
  - 한글 기준과 영어 기준의 중복이 다르므로 각각 drop
  - 인덱스 기반으로 drop

## 4.세부 전처리

### 4-1.머리 숫자 제거

#### 4-1-1.Tag `ho`에 해당하는 내용

- `1.`으로 시작하는 부분들 점검
- 영어와 한글의 머릿 숫자가 다른 쌍을 점검
  - 총 26개 쌍 중 2개는 내용이 다르므로 drop
  - 나머지는 머리숫자 삭제 과정에 포함
- 정규식을 통해 머리 숫자 삭제
- 추가로 한글에서 `4의2. `와 같이 시작하는 항목들의 머리 숫자 삭제

#### 4-1-2.Tag `hang`에 해당하는 내용

- 영어는 `(1)`로 시작, 한글은 `①`로 시작
- 영어와 한글의 머릿 숫자가 다른 쌍 점검
  - 총 173개 쌍 중 16개는 내용이 다르므로 삭제
  - 나머지는 머리숫자 삭제 과정에 포함

### 4-2.ASCII코드 점검

#### 4-2-1.한글 Case

- "　", "“", "”", "／", "．", "― ", "“", "”", "‘", "’", "『", "』", "（", "＋", "－", "＝", "×", "÷", "±", "％", "㎜", "㎖", "ℓ", "㎞", "㎡", "㎒", "㎓", "㎑", "㎶", "○"

#### 4-2-2.영어 Case

- "　", "“", "”", "―", "，", "“", "”", "‘", "’", "）", "＋", "－", "＝", "×", "÷", "±", "㎝", "℃", "㎎", "㎢", "㎥", "㏈", "㎒"

## 5.추가 발견사항

1. (Enforcement Date) ➡️ 제거할지 안할지부터 결정
2. "선불식 할부거래에서의 소비자 보호 지침" 확인해보기
3. 삭제 [시행일 : xxxx. x. x.] 이런 케이스 찾기
4. <<>> 로 이루어진 케이스 더 있는지 보기
5. `.`, `,` 으로 시작하는 케이스 보기
6. 영어에 원 숫자 있는 케이스
7. 한글 본문의 내용이 title로 일부 간 케이스
8. 영-한 문장끼리 매칭되나, 내용이 일부 날아간 경우
9. hang 클래스에 이상한 내용 딸려 들어온 것
   > 1. 해운- 선박직원법 - A person who has obtained a license under the ~
   > 2. 행정일반- 정부출연연구기관 등의 설립운영 및 육성에 관한 법률 - Research institutes listed on the left column of the following chart at the time of the en ~
   > 3. 위와 동일한 법령 - Research institutes listed on the left column of the following chart (hereinafter in this paragraph referred ~
   > 4. 노동 - 국가기술자격법 시행령 - Notwithstanding Article 10 (2) and attached Ta ~
   >
10. 괴상한 온점 `．`
11. lf 로 시작하는 케이스
12. 페어가 안 맞는 항목 (내국세)
